{"version":3,"file":"utils.esm.js","sources":["../src/constants.ts","../src/sortingFns/sortingFns.ts","../src/langUtils/langUtils.ts"],"sourcesContent":["import { TDialect, TLang, TRegion } from './types';\r\n\r\nexport const DESCRIPTIONS_JOINER = '/';\r\nexport const NOT_DEFINED_PLACEHOLDER = '- not defined -';\r\nexport const LOADING_TAG_PLACEHOLDER = {\r\n  tag: 'loading',\r\n  descriptions: ['Loading data...'],\r\n} as TDialect & TRegion & TLang;\r\n\r\nexport enum GroupedFilterSymbols {\r\n  Digits = '0-9',\r\n  SpecialCharacters = '#',\r\n}\r\n","import { NOT_DEFINED_PLACEHOLDER } from '../constants';\r\nimport { IDefinition, ITagInfo } from '../types';\r\n\r\nexport const sortSiteTextFn = (d1: IDefinition, d2: IDefinition) => {\r\n  if (\r\n    d1.siteTextlikeString &&\r\n    d2.siteTextlikeString &&\r\n    d1.siteTextlikeString.toLowerCase() > d2.siteTextlikeString.toLowerCase()\r\n  ) {\r\n    return 1;\r\n  }\r\n\r\n  if (\r\n    d1.siteTextlikeString &&\r\n    d2.siteTextlikeString &&\r\n    d1.siteTextlikeString.toLowerCase() < d2.siteTextlikeString.toLowerCase()\r\n  ) {\r\n    return -1;\r\n  }\r\n  return 0;\r\n};\r\n\r\nexport const sortTagInfosFn = (t1: ITagInfo, t2: ITagInfo) => {\r\n  if (t1.descriptions && t1.descriptions[0] === NOT_DEFINED_PLACEHOLDER) {\r\n    return -1;\r\n  }\r\n  if (t2.descriptions && t2.descriptions[0] === NOT_DEFINED_PLACEHOLDER) {\r\n    return 1;\r\n  }\r\n  if (\r\n    t1.descriptions &&\r\n    t2.descriptions &&\r\n    t1.descriptions[0] > t2.descriptions[0]\r\n  ) {\r\n    return 1;\r\n  }\r\n  if (\r\n    t1.descriptions &&\r\n    t2.descriptions &&\r\n    t1.descriptions[0] < t2.descriptions[0]\r\n  ) {\r\n    return -1;\r\n  }\r\n  return 0;\r\n};\r\n","import Tags from 'language-tags';\r\nimport { DESCRIPTIONS_JOINER, NOT_DEFINED_PLACEHOLDER } from '../constants';\r\nimport { sortTagInfosFn } from '../sortingFns/sortingFns';\r\nimport {\r\n  LanguageInfo,\r\n  LanguageInput,\r\n  TDialect,\r\n  TLang,\r\n  TRegion,\r\n} from '../types';\r\n\r\n\r\n\r\n// X_LANG_TAGS is an array of private (x-...) subtags; they are used as additional language tags to represent languages\r\n// that are not present in the `language-tags` npm package (which refers to the IANA registry).\r\n// List of main language tags we get from the `language-tags` library will be extended with these x- tags.\r\nexport const X_LANG_TAGS: Array<TLang> = [\r\n  { tag: 'x-senga', descriptions: ['Senga'] },\r\n  { tag: 'x-fungwe', descriptions: ['Fungwe'] },\r\n  { tag: 'x-tambo', descriptions: ['Tambo'] },\r\n  { tag: 'x-wandya', descriptions: ['Wandya'] },\r\n  { tag: 'x-lungu', descriptions: ['Lungu'] },\r\n  { tag: 'x-chikunda', descriptions: ['Chikunda'] },\r\n  { tag: 'x-kabdende', descriptions: ['Kabdende'] },\r\n  { tag: 'x-shila', descriptions: ['Shila'] },\r\n  { tag: 'x-mwenyi', descriptions: ['Mwenyi'] },\r\n  { tag: 'x-liuwa', descriptions: ['Liuwa'] },\r\n  { tag: 'x-Seabo', descriptions: ['Seabo'] },\r\n];\r\n\r\nenum TagTypes {\r\n  LANGUAGE = 'language',\r\n  REGION = 'region',\r\n  DIALECT = 'variant',\r\n}\r\n\r\nexport const xTag2langInfo = (tagGiven: string): LanguageInfo | undefined => {\r\n  const foundXtagIndex = X_LANG_TAGS.findIndex((xTag) => xTag.tag === tagGiven);\r\n  if (foundXtagIndex >= 0) {\r\n    return {\r\n      lang: X_LANG_TAGS[foundXtagIndex],\r\n    };\r\n  } else return undefined;\r\n};\r\n\r\nexport const tag2langInfo = (tagGiven: string): LanguageInfo => {\r\n  if (xTag2langInfo(tagGiven)) return xTag2langInfo(tagGiven)!;\r\n  const complexTag = Tags(tagGiven);\r\n  const lang = complexTag.find(TagTypes.LANGUAGE);\r\n  const region = complexTag.find(TagTypes.REGION);\r\n  const dialect = complexTag.find(TagTypes.DIALECT);\r\n  const langInfo: LanguageInfo = {\r\n    lang: { tag: lang?.format() || '', descriptions: lang?.descriptions() },\r\n  };\r\n  if (region) {\r\n    langInfo.region = {\r\n      tag: region.format(),\r\n      descriptions: region.descriptions(),\r\n    };\r\n  }\r\n  if (dialect) {\r\n    langInfo.dialect = {\r\n      tag: dialect.format(),\r\n      descriptions: dialect.descriptions(),\r\n    };\r\n  }\r\n  return langInfo;\r\n};\r\n\r\nexport const langInfo2tag = (\r\n  langInfo: LanguageInfo | undefined\r\n): string | undefined => {\r\n  if (!langInfo) return undefined;\r\n  const { lang, region, dialect } = langInfo;\r\n  let langTag = lang.tag;\r\n\r\n  const xTag = X_LANG_TAGS.find((xt) => xt.tag === langTag);\r\n  if (xTag) return xTag.tag;\r\n\r\n  region?.tag && (langTag += '-' + region?.tag);\r\n  dialect?.tag && (langTag += '-' + dialect?.tag);\r\n  return Tags(langTag).format();\r\n};\r\n\r\nexport const langInfo2langInput = (langInfo: LanguageInfo): LanguageInput => {\r\n  return {\r\n    language_code: langInfo.lang.tag,\r\n    dialect_code: langInfo.dialect?.tag || null,\r\n    geo_code: langInfo.region?.tag || null,\r\n  };\r\n};\r\n\r\nexport const langInfo2String = (langInfo: LanguageInfo | undefined): string => {\r\n  const xTag = X_LANG_TAGS.find((xt) => xt.tag === langInfo?.lang.tag);\r\n  if (xTag) {\r\n    return xTag.descriptions?.join(DESCRIPTIONS_JOINER) || xTag.tag;\r\n  }\r\n  let res = langInfo?.lang.descriptions?.join(DESCRIPTIONS_JOINER);\r\n  if (!res) return '';\r\n  if (langInfo?.region?.descriptions) {\r\n    res += ' ' + langInfo.region?.descriptions.join(DESCRIPTIONS_JOINER);\r\n  }\r\n  if (langInfo?.dialect?.descriptions) {\r\n    res +=\r\n      ', dialect:' + langInfo?.dialect?.descriptions.join(DESCRIPTIONS_JOINER);\r\n  }\r\n  return res;\r\n};\r\n\r\nexport const subTags2LangInfo = ({\r\n  lang,\r\n  region,\r\n  dialect,\r\n}: {\r\n  lang: string;\r\n  region?: string;\r\n  dialect?: string;\r\n}): LanguageInfo => {\r\n  if (xTag2langInfo(lang)) return xTag2langInfo(lang)!;\r\n  let langTag = lang;\r\n  region && (langTag += '-' + region);\r\n  dialect && (langTag += '-' + dialect);\r\n  langTag = Tags(langTag).format();\r\n  return tag2langInfo(langTag);\r\n};\r\n\r\nexport const compareLangInfo = (\r\n  a: LanguageInfo | null | undefined,\r\n  b: LanguageInfo | null | undefined\r\n): boolean => {\r\n  if (a === b) return true; // case both null or both undefined\r\n  if (!a || !b) return false; // case one of them null or undefined\r\n  if (a.lang.tag !== b.lang.tag) {\r\n    return false;\r\n  }\r\n\r\n  if (a.dialect?.tag !== b.dialect?.tag) {\r\n    return false;\r\n  }\r\n\r\n  if (a.region?.tag !== b.region?.tag) {\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\ntype LangsRegistry = {\r\n  langs: Array<TLang>;\r\n  dialects: Array<TDialect>;\r\n  regions: Array<TRegion>;\r\n};\r\n\r\nenum TagSpecialDescriptions {\r\n  PRIVATE_USE = 'Private use',\r\n}\r\n\r\n// make it async to test and prepare for possible language library change to async\r\nexport const getLangsRegistry = async (\r\n  enabledTags?: string[]\r\n): Promise<LangsRegistry> => {\r\n  return new Promise((resolve) => {\r\n    const allTags = Tags.search(/.*/);\r\n    const langs: Array<TLang> = [...X_LANG_TAGS];\r\n    const dialects: Array<TDialect> = [\r\n      { tag: null, descriptions: [NOT_DEFINED_PLACEHOLDER] },\r\n    ];\r\n    const regions: Array<TRegion> = [\r\n      { tag: null, descriptions: [NOT_DEFINED_PLACEHOLDER] },\r\n    ];\r\n\r\n    for (const currTag of allTags) {\r\n      if (enabledTags && !enabledTags.includes(currTag.format())) {\r\n        continue;\r\n      }\r\n\r\n      if (\r\n        currTag.deprecated() ||\r\n        currTag.descriptions().includes(TagSpecialDescriptions.PRIVATE_USE)\r\n      ) {\r\n        continue;\r\n      }\r\n\r\n      if (currTag.type() === TagTypes.LANGUAGE) {\r\n        langs.push({\r\n          tag: currTag.format(),\r\n          descriptions: currTag.descriptions(),\r\n        });\r\n      }\r\n      if (currTag.type() === TagTypes.REGION) {\r\n        regions.push({\r\n          tag: currTag.format(),\r\n          descriptions: currTag.descriptions(),\r\n        });\r\n      }\r\n      if (currTag.type() === TagTypes.DIALECT) {\r\n        dialects.push({\r\n          tag: currTag.format(),\r\n          descriptions: currTag.descriptions(),\r\n        });\r\n      }\r\n    }\r\n    langs.sort(sortTagInfosFn);\r\n    dialects.sort(sortTagInfosFn);\r\n    regions.sort(sortTagInfosFn);\r\n\r\n    resolve({\r\n      langs,\r\n      dialects,\r\n      regions,\r\n    });\r\n  });\r\n};\r\n\r\nexport const subTags2Tag = ({\r\n  lang,\r\n  region,\r\n  dialect,\r\n}: {\r\n  lang: string;\r\n  region?: string;\r\n  dialect?: string;\r\n}): string => {\r\n  if (X_LANG_TAGS.find((xt) => xt.tag === lang)) return lang;\r\n  let langTag = lang;\r\n  region && (langTag += '-' + region);\r\n  dialect && (langTag += '-' + dialect);\r\n  return Tags(langTag).format();\r\n};\r\n\r\nexport const languageInput2tag = (languageInput: LanguageInput): string => {\r\n  return subTags2Tag({\r\n    lang: languageInput.language_code,\r\n    dialect: languageInput.dialect_code || undefined,\r\n    region: languageInput.geo_code || undefined,\r\n  });\r\n};\r\n"],"names":["DESCRIPTIONS_JOINER","NOT_DEFINED_PLACEHOLDER","LOADING_TAG_PLACEHOLDER","tag","descriptions","GroupedFilterSymbols","sortSiteTextFn","d1","d2","siteTextlikeString","toLowerCase","sortTagInfosFn","t1","t2","X_LANG_TAGS","TagTypes","xTag2langInfo","tagGiven","foundXtagIndex","findIndex","xTag","lang","undefined","tag2langInfo","complexTag","Tags","find","LANGUAGE","region","REGION","dialect","DIALECT","langInfo","format","langInfo2tag","langTag","xt","langInfo2langInput","_langInfo$dialect","_langInfo$region","language_code","dialect_code","geo_code","langInfo2String","_langInfo$lang$descri","_langInfo$region2","_langInfo$dialect2","_xTag$descriptions","join","res","_langInfo$region3","_langInfo$dialect3","subTags2LangInfo","_ref","compareLangInfo","a","b","_a$dialect","_b$dialect","_a$region","_b$region","TagSpecialDescriptions","getLangsRegistry","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","enabledTags","wrap","_callee$","_context","prev","next","abrupt","Promise","resolve","allTags","search","langs","concat","dialects","regions","_iterator","_createForOfIteratorHelperLoose","_step","done","currTag","value","includes","deprecated","PRIVATE_USE","type","push","sort","stop","_x","apply","arguments","subTags2Tag","_ref3","languageInput2tag","languageInput"],"mappings":"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"}